# ValutaTrade Hub - Валютный Кошелек

Консольное приложение для управления мультивалютным портфелем с поддержкой криптовалют (через CoinGecko) и фиатных валют (через ExchangeRate-API).

## Возможности

- Управление несколькими валютами в одном портфеле.
- Поддержка популярных криптовалют (BTC, ETH, SOL) и фиатных валют (USD, EUR, RUB).
- Получение актуальных курсов валют от внешних API с кэшированием.
- Возможность симулировать покупку и продажу валют.
- Оценка общей стоимости портфеля в выбранной базовой валюте.
- Ведение логов всех ключевых операций для отладки и аудита.
- Удобный и понятный интерфейс командной строки с иконками и подсказками.

## Структура проекта

Проект имеет модульную структуру, разделенную по слоям ответственности:

```
valutatrade_hub/
├── cli/              # Логика интерфейса командной строки
│   └── interface.py
├── core/             # Основная бизнес-логика
│   ├── models.py     # Доменные модели (User, Wallet, Portfolio)
│   ├── usecases.py   # Сценарии использования (register, buy, sell)
│   └── exceptions.py # Пользовательские исключения
├── infra/            # Инфраструктурный слой
│   ├── database.py   # Менеджер для работы с JSON-файлами
│   └── settings.py   # Глобальные настройки
├── parser_service/   # Сервис для получения курсов валют
│   ├── api_clients.py # Клиенты для внешних API
│   ├── updater.py    # Оркестратор обновления курсов
│   └── storage.py    # Логика сохранения курсов
├── decorators.py     # Декораторы (например, для логирования)
└── logging_config.py # Конфигурация логирования
```

##  Установка и запуск

### Предварительные требования
- **Python 3.12+**
- **Poetry** (менеджер зависимостей)

### Установка
1.  **Клонировать репозиторий:**
    ```bash
    git clone https://github.com/VVh1tey/finalproject_morozov_m25-555
    cd finalproject_morozov_m25-555
    ```

2.  **Установить зависимости:**
    Используйте команду из `Makefile` для установки всех необходимых библиотек через Poetry.
    ```bash
    make install
    ```

3.  **Запустить приложение:**
    Используйте команду `make project` для запуска CLI.
    ```bash
    make project
    ```

## Конфигурация

-   **Основные настройки** (`valutatrade_hub/infra/settings.py`):
    -   `RATES_TTL_SECONDS`: Время жизни кэша курсов (в секундах).
    -   `DEFAULT_BASE_CURRENCY`: Валюта по умолчанию для расчетов (USD).
    -   Пути к файлам данных (`data/`) и логов (`logs/`).

-   **Настройки парсера** (`valutatrade_hub/parser_service/config.py`):
    -   `FIAT_CURRENCIES`, `CRYPTO_CURRENCIES`: Списки отслеживаемых валют.
    -   `REQUEST_TIMEOUT`: Таймаут для запросов к API.

### Настройка API ключей

Для получения курсов фиатных валют требуется ключ от **ExchangeRate-API**.

1.  Зарегистрируйтесь на [ExchangeRate-API](https://www.exchangerate-api.com/) и получите бесплатный ключ.
2.  Установите ключ как переменную окружения.

**Linux/Mac (.bashrc или .zshrc):**
```bash
export EXCHANGERATE_API_KEY="ВАШ_КЛЮЧ_ЗДЕСЬ"
```

**Windows (PowerShell):**
```powershell
$env:EXCHANGERATE_API_KEY="ВАШ_КЛЮЧ_ЗДЕСЬ"
```

**Windows (CMD):**
```cmd
set EXCHANGERATE_API_KEY=ВАШ_КЛЮЧ_ЗДЕСЬ
```

## Команды

Для получения полного списка команд и их описания, используйте команду `help` внутри приложения.

## ASCIINEMA demo
https://asciinema.org/a/zf8I3jJkmGbqdXrI
